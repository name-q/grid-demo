<!DOCTYPE html>
<html>
<head>
	<title>可拖动方块</title>
	<style>
		#box {
			position: fixed;
			top: 50%;
			right: 0;
			transform: translateY(-50%);
			width: 100px;
			height: 100px;
			background-color: red;
			cursor: move;
		}
	</style>
</head>
<body>
	<div id="box"></div>
	<script>
		var box = document.getElementById('box');
		var isDragging = false;
		var startX, startY, boxLeft, boxTop;

		box.addEventListener('mousedown', startDragging);
		document.addEventListener('mousemove', drag);
		document.addEventListener('mouseup', stopDragging);

		function startDragging(e) {
			isDragging = true;
			startX = e.clientX;
			startY = e.clientY;
			boxLeft = box.offsetLeft;
			boxTop = box.offsetTop;
		}

		function drag(e) {
			if (!isDragging) {
				return;
			}

			var newX = e.clientX - startX + boxLeft;
			var newY = e.clientY - startY + boxTop;

			// 确保方块不会超出窗口边界
			var maxX = window.innerWidth - box.offsetWidth;
			var maxY = window.innerHeight - box.offsetHeight;
			newX = Math.min(maxX, Math.max(0, newX));
			newY = Math.min(maxY, Math.max(0, newY));

			box.style.left = newX + 'px';
			box.style.top = newY + 'px';
		}

		function stopDragging(e) {
			isDragging = false;
		}
	</script>
</body>
</html>
